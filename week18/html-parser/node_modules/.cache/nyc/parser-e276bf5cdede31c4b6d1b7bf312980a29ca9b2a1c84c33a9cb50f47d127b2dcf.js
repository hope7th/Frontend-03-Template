"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.paserHTML = paserHTML;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var css = require("css");

var layout = require("./4_1_layout.js");

var cunrrentToken = null;
var cunrrentAttribute = null;
var stack = [{
  type: "document",
  children: []
}];
var cunrrentTextNode = null;
var rules = [];

function specificity(selector) {
  var p = [0, 0, 0, 0];
  var selectorParts = selector.split(" ");

  var _iterator = _createForOfIteratorHelper(selectorParts),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var part = _step.value;

      if (part.charAt(0) == "#") {
        p[1] += 1;
      } else if (part.charAt(0) == ".") {
        p[2] += 1;
      } else {
        p[3] += 1;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return p;
}

function compare(sp1, sp2) {
  if (sp1[0] - sp2[0]) return sp1[0] - sp2[0];
  if (sp1[1] - sp2[1]) return sp1[1] - sp2[1];
  if (sp1[2] - sp2[2]) return sp1[2] - sp2[2];
  return sp1[3] - sp2[3];
}

function addCSSRules(text) {
  var ast = css.parse(text);
  console.log(JSON.stringify(ast, null, "  "));
  rules.push.apply(rules, _toConsumableArray(ast.stylesheet.rules));
}

function match(element, selector) {
  if (!selector || !element.attibutes) return false;

  if (selector.charAt(0) == "#") {
    var attr = element.attibutes.filter(function (attr) {
      return attr.name === "id";
    })[0];
    if (attr && attr.value === selector.replace("#", '')) return true;
  } else if (selector.charAt(0) == ".") {
    var attr = element.attibutes.filter(function (attr) {
      return attr.name === "class";
    })[0];
    if (attr && attr.value === selector.replace("#", '.')) return true;
  } else {
    if (element.tagName === selector) {
      return true;
    }
  }

  return false;
}

function computeCSS(element) {
  console.log(rules);
  console.log("comput CSS for Element", element);
  var element = stack.slice().reverse();
  if (!element.computedStyle) element.computedStyle = {};

  var _iterator2 = _createForOfIteratorHelper(rules),
      _step2;

  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var rule = _step2.value;
      var selectorParts = rule.selectors[0].splict(" ").reverse();
      if (!match(element.selectorParts[0])) continue;
      var matched = false;
      var j = 1;

      for (var i = 0; i < element.length; i++) {
        if (match(element[i], selectorParts[j])) {
          j++;
        }
      }

      ;
      if (j > selectorParts.length) matched = true;

      if (matched) {
        var sp = specificity(rule.selectors[0]);
        var computedStyle = element.computedStyle;

        var _iterator3 = _createForOfIteratorHelper(rule.declarations),
            _step3;

        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var declaration = _step3.value;
            if (!computedStyle[declaration.property]) computedStyle[declaration.property] = {};

            if (!computedStyle[declaration.property].specificity) {
              computedStyle[declaration.property].value = declaration.value;
              computedStyle[declaration.property].specificity = sp;
            } else if (compare(computedStyle[declaration.property].specificity, sp) < 0) {
              computedStyle[declaration.property].value = declaration.value;
              computedStyle[declaration.property].specificity = sp;
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }

        console.log("Element", element, "matched rule", rule);
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
}

function emit(token) {
  console.log(token);
  var top = stack[stack.length - 1];

  if (token.type == "startTag") {
    var element = {
      type: "element",
      children: [],
      attibutes: []
    };
    element.tagName = token.tagName;

    for (var p in token) {
      if (p != token && p != "tagName") {
        element.attibutes.push({
          name: p,
          value: token[p]
        });
      }
    }

    computeCSS(element);
    top.children.push(element);
    element.parent = top;

    if (!token.isSelfClosing) {
      stack.push(element);
    }

    cunrrentTextNode = null;
  } else if (token.type == "endTag") {
    if (token.tagName != token.tagName) {
      throw new Error("Tag start end doesn't match");
    } else {
      if (top.tagName === "style") {
        addCSSRules(top.children[0].content);
      }

      layout(top);
      stack.pop();
    }

    cunrrentTextNode = null;
  } else if (token.type == "text") {
    if (cunrrentTextNode == null) {
      cunrrentTextNode = {
        type: "text",
        content: ""
      };
      top.children.push(cunrrentTextNode);
    }

    cunrrentTextNode.content += token.content;
  }
}

var EOF = Symbol("EOF");

function data(c) {
  if (c == "<") {
    return tagOpen;
  } else if (c == EOF) {
    emit({
      type: "EOF"
    });
    return;
  } else {
    emit({
      type: "text",
      content: c
    });
    return data;
  }
}

function tagOpen(c) {
  if (c == "/") {
    return endTagOpen;
  } else if (c.match(/^[a-zA-Z$]/)) {
    cunrrentToken = {
      type: "startTag",
      tagName: ""
    };
    return tagName(c);
  } else {
    return;
  }
}

function endTagOpen(c) {
  if (c.match(/^[a-zA-Z]¥/)) {
    cunrrentToken = {
      type: "endTag",
      tagName: ""
    };
    return tagName(c);
  } else if (c == ">") {} else if (c == EOF) {} else {}
}

function tagName(c) {
  if (c.match(/^[\t\n\g ]$/)) {
    return beforeAttributeName;
  } else if (c == "/") {
    return selfCloseingStartTag;
  } else if (c.match(/^[a-zA-Z]$/)) {
    cunrrentToken.tagName += c;
    return tagName;
  } else if (c == ">") {
    return data;
  } else {
    return tagName;
  }
}

function beforeAttributeName(c) {
  if (c.match(/^[\t\n\f ]$/)) {
    return beforeAttributeName;
  } else if (c == ">" || c == "/" || c == EOF) {
    return afterAttributeName(c);
  } else if (c == "=") {} else {
    cunrrentAttribute = {
      name: "",
      value: ""
    };
    return attributeName(c);
  }
}

function afterAttributeName(c) {
  if (c.match(/^[\t\n\f ]$/) || c == "/" || c == EOF) {
    return afterAttributeName(c);
  } else if (c == "=") {
    return beforeAttributeValue;
  } else if (c == "\0") {} else if (c == "\"" || C == "'" || c == "<") {} else {
    cunrrentAttribute.name += c;
    return attributeName;
  }
}

function beforeAttributeValue(c) {
  if (c.match(/^[\t\n\f ]$/) || c == "/" || c == EOF) {
    return beforeAttributeValue;
  } else if (c == "\"") {
    return doubleQuotedAttributeValue;
  } else if (c == "\'") {
    return singleQuotedAttributeValue;
  } else if (c == ">") {} else {
    return UnquotedAttributeValue(c);
  }
}

function doubleQuotedAttributeValue(c) {
  if (c == "\"") {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    return afterQuotedAttributeValue;
  } else if (c == "\0") {} else if (c == EOF) {} else {
    cunrrentAttribute.value += c;
    return doubleQuotedAttributeValue;
  }
}

function singleQuotedAttributeValue(c) {
  if (c == "\'") {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    return afterQuotedAttributeValue;
  } else if (c == "\0") {} else if (c == EOF) {} else {
    cunrrentAttribute.value += c; //    return singleQuotedAttributeValue 奇怪

    return doubleQuotedAttributeValue;
  }
}

function UnquotedAttributeValue(c) {
  if (c.match(/^[\t\n\f ]$/)) {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    return beforeAttributeName;
  } else if (c == "/") {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    return selfCloseingStartTag;
  } else if (c == ">") {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    emit(cunrrentToken);
    return data;
  } else if (c == "\0") {} else if (c == "\"" || C == "'" || c == "<" || c == "=" || c == "`") {} else if (c == EOF) {} else {
    cunrrentAttribute.name += c;
    return UnquotedAttributeValue;
  }
}

function afterQuotedAttributeValue(c) {
  if (c.match(/^[\t\n\f ]$/)) {
    return beforeAttributeName;
  } else if (c == "/") {
    return selfCloseingStartTag;
  } else if (c == ">") {
    cunrrentToken[cunrrentAttribute.name] = cunrrentAttribute.value;
    emit(cunrrentToken);
    return data;
  } else if (c == EOF) {} else {
    cunrrentAttribute.name += c;
    return doubleQuotedAttributeValue;
  }
}

function attributeName(c) {}

function selfCloseingStartTag(c) {
  if (c == ">") {
    cunrrentToken.isSelfClosing = true;
    return data;
  } else if (c == "EOF") {} else {}
}

function paserHTML(html) {
  console.log("------");
  console.log(html);
  var state = data;

  var _iterator4 = _createForOfIteratorHelper(html),
      _step4;

  try {
    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
      var c = _step4.value;
      state = state(c);
    }
  } catch (err) {
    _iterator4.e(err);
  } finally {
    _iterator4.f();
  }

  state = state(EOF);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlci5qcyJdLCJuYW1lcyI6WyJjc3MiLCJyZXF1aXJlIiwibGF5b3V0IiwiY3VucnJlbnRUb2tlbiIsImN1bnJyZW50QXR0cmlidXRlIiwic3RhY2siLCJ0eXBlIiwiY2hpbGRyZW4iLCJjdW5ycmVudFRleHROb2RlIiwicnVsZXMiLCJzcGVjaWZpY2l0eSIsInNlbGVjdG9yIiwicCIsInNlbGVjdG9yUGFydHMiLCJzcGxpdCIsInBhcnQiLCJjaGFyQXQiLCJjb21wYXJlIiwic3AxIiwic3AyIiwiYWRkQ1NTUnVsZXMiLCJ0ZXh0IiwiYXN0IiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInB1c2giLCJzdHlsZXNoZWV0IiwibWF0Y2giLCJlbGVtZW50IiwiYXR0aWJ1dGVzIiwiYXR0ciIsImZpbHRlciIsIm5hbWUiLCJ2YWx1ZSIsInJlcGxhY2UiLCJ0YWdOYW1lIiwiY29tcHV0ZUNTUyIsInNsaWNlIiwicmV2ZXJzZSIsImNvbXB1dGVkU3R5bGUiLCJydWxlIiwic2VsZWN0b3JzIiwic3BsaWN0IiwibWF0Y2hlZCIsImoiLCJpIiwibGVuZ3RoIiwic3AiLCJkZWNsYXJhdGlvbnMiLCJkZWNsYXJhdGlvbiIsInByb3BlcnR5IiwiZW1pdCIsInRva2VuIiwidG9wIiwicGFyZW50IiwiaXNTZWxmQ2xvc2luZyIsIkVycm9yIiwiY29udGVudCIsInBvcCIsIkVPRiIsIlN5bWJvbCIsImRhdGEiLCJjIiwidGFnT3BlbiIsImVuZFRhZ09wZW4iLCJiZWZvcmVBdHRyaWJ1dGVOYW1lIiwic2VsZkNsb3NlaW5nU3RhcnRUYWciLCJhZnRlckF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVOYW1lIiwiYmVmb3JlQXR0cmlidXRlVmFsdWUiLCJDIiwiZG91YmxlUXVvdGVkQXR0cmlidXRlVmFsdWUiLCJzaW5nbGVRdW90ZWRBdHRyaWJ1dGVWYWx1ZSIsIlVucXVvdGVkQXR0cmlidXRlVmFsdWUiLCJhZnRlclF1b3RlZEF0dHJpYnV0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QSxLQUFLLENBQUNmLENBQUQsQ0FBYjtBQUNIO0FBTjJCO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBTzVCZSxFQUFBQSxLQUFLLEdBQUdBLEtBQUssQ0FBQ2xCLEdBQUQsQ0FBYjtBQUNIIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9odGpjLXl1L0Rlc2t0b3AvanMxMDAwaG91cnMvdHJhaW5pbmcv5bel5YW36ZO+MTgvaHRtbC1wYXJzZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNzcyA9IHJlcXVpcmUoXCJjc3NcIik7XG5jb25zdCBsYXlvdXQgPSByZXF1aXJlKFwiLi80XzFfbGF5b3V0LmpzXCIpXG5sZXQgY3VucnJlbnRUb2tlbiA9IG51bGw7XG5sZXQgY3VucnJlbnRBdHRyaWJ1dGUgPSBudWxsO1xubGV0IHN0YWNrID0gW3tcbiAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgY2hpbGRyZW46IFtdXG59XTtcbmxldCBjdW5ycmVudFRleHROb2RlID0gbnVsbDtcbmxldCBydWxlcyA9IFtdO1xuXG5mdW5jdGlvbiBzcGVjaWZpY2l0eShzZWxlY3Rvcil7XG4gICAgdmFyIHAgPSBbMCwwLDAsMF07XG4gICAgdmFyIHNlbGVjdG9yUGFydHMgPSBzZWxlY3Rvci5zcGxpdChcIiBcIik7XG4gICAgZm9yKHZhciBwYXJ0IG9mIHNlbGVjdG9yUGFydHMpe1xuICAgICAgICBpZihwYXJ0LmNoYXJBdCgwKT09XCIjXCIpe1xuICAgICAgICAgICAgcFsxXSArPSAxO1xuICAgICAgICB9ZWxzZSBpZihwYXJ0LmNoYXJBdCgwKT09XCIuXCIpe1xuICAgICAgICAgICAgcFsyXSs9MTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgcFszXSs9MTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcDtcbn1cblxuZnVuY3Rpb24gY29tcGFyZShzcDEsc3AyKXtcbiAgICBpZihzcDFbMF0tc3AyWzBdKVxuICAgICAgICByZXR1cm4gc3AxWzBdLXNwMlswXVxuICAgIGlmKHNwMVsxXS1zcDJbMV0pXG4gICAgICAgIHJldHVybiBzcDFbMV0tc3AyWzFdXG4gICAgaWYoc3AxWzJdLXNwMlsyXSlcbiAgICAgICAgcmV0dXJuIHNwMVsyXS1zcDJbMl07XG4gICAgcmV0dXJuIHNwMVszXS1zcDJbM107XG59XG5cbmZ1bmN0aW9uIGFkZENTU1J1bGVzKHRleHQpIHtcbiAgICB2YXIgYXN0ID0gY3NzLnBhcnNlKHRleHQpO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGFzdCwgbnVsbCwgXCIgIFwiKSk7XG4gICAgcnVsZXMucHVzaCguLi5hc3Quc3R5bGVzaGVldC5ydWxlcyk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoKGVsZW1lbnQsc2VsZWN0b3Ipe1xuICAgIGlmKCFzZWxlY3Rvcnx8IWVsZW1lbnQuYXR0aWJ1dGVzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYoc2VsZWN0b3IuY2hhckF0KDApPT1cIiNcIil7XG4gICAgICAgIHZhciBhdHRyID0gZWxlbWVudC5hdHRpYnV0ZXMuZmlsdGVyKGF0dHI9PmF0dHIubmFtZT09PVwiaWRcIilbMF07XG4gICAgICAgIGlmKGF0dHImJmF0dHIudmFsdWU9PT1zZWxlY3Rvci5yZXBsYWNlKFwiI1wiLCcnKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgfWVsc2UgaWYoc2VsZWN0b3IuY2hhckF0KDApPT1cIi5cIil7XG4gICAgICAgIHZhciBhdHRyID0gZWxlbWVudC5hdHRpYnV0ZXMuZmlsdGVyKGF0dHI9PmF0dHIubmFtZT09PVwiY2xhc3NcIilbMF07XG4gICAgICAgIGlmKGF0dHImJmF0dHIudmFsdWU9PT1zZWxlY3Rvci5yZXBsYWNlKFwiI1wiLCcuJykpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGlmKGVsZW1lbnQudGFnTmFtZT09PSBzZWxlY3Rvcil7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVDU1MoZWxlbWVudCkge1xuICAgIGNvbnNvbGUubG9nKHJ1bGVzKTtcbiAgICBjb25zb2xlLmxvZyhcImNvbXB1dCBDU1MgZm9yIEVsZW1lbnRcIiwgZWxlbWVudCk7XG4gICAgdmFyIGVsZW1lbnQgPSBzdGFjay5zbGljZSgpLnJldmVyc2UoKTtcbiAgICBpZiAoIWVsZW1lbnQuY29tcHV0ZWRTdHlsZSlcbiAgICAgICAgZWxlbWVudC5jb21wdXRlZFN0eWxlID0ge307XG5cbiAgICBmb3IgKGxldCBydWxlIG9mIHJ1bGVzKSB7XG4gICAgICAgIHZhciBzZWxlY3RvclBhcnRzID0gcnVsZS5zZWxlY3RvcnNbMF0uc3BsaWN0KFwiIFwiKS5yZXZlcnNlKCk7XG5cbiAgICAgICAgaWYgKCFtYXRjaChlbGVtZW50LnNlbGVjdG9yUGFydHNbMF0pKVxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgbGV0IG1hdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGogPSAxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChtYXRjaChlbGVtZW50W2ldLCBzZWxlY3RvclBhcnRzW2pdKSkge1xuICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGogPiBzZWxlY3RvclBhcnRzLmxlbmd0aClcbiAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgICAgICBpZiAobWF0Y2hlZCkge1xuICAgICAgICAgICAgdmFyIHNwID0gc3BlY2lmaWNpdHkocnVsZS5zZWxlY3RvcnNbMF0pXG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGVsZW1lbnQuY29tcHV0ZWRTdHlsZTtcbiAgICAgICAgICAgIGZvcih2YXIgZGVjbGFyYXRpb24gb2YgcnVsZS5kZWNsYXJhdGlvbnMpe1xuICAgICAgICAgICAgICAgIGlmKCFjb21wdXRlZFN0eWxlW2RlY2xhcmF0aW9uLnByb3BlcnR5XSlcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZVtkZWNsYXJhdGlvbi5wcm9wZXJ0eV0gPSB7fVxuICAgICAgICAgICAgICAgIGlmKCFjb21wdXRlZFN0eWxlW2RlY2xhcmF0aW9uLnByb3BlcnR5XS5zcGVjaWZpY2l0eSl7XG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVbZGVjbGFyYXRpb24ucHJvcGVydHldLnZhbHVlID0gZGVjbGFyYXRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVbZGVjbGFyYXRpb24ucHJvcGVydHldLnNwZWNpZmljaXR5ID0gc3A7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoY29tcGFyZShjb21wdXRlZFN0eWxlW2RlY2xhcmF0aW9uLnByb3BlcnR5XS5zcGVjaWZpY2l0eSxzcCk8MCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVbZGVjbGFyYXRpb24ucHJvcGVydHldLnZhbHVlID0gZGVjbGFyYXRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVbZGVjbGFyYXRpb24ucHJvcGVydHldLnNwZWNpZmljaXR5ID0gc3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbGVtZW50XCIsIGVsZW1lbnQsIFwibWF0Y2hlZCBydWxlXCIsIHJ1bGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlbWl0KHRva2VuKSB7XG4gICAgY29uc29sZS5sb2codG9rZW4pXG4gICAgbGV0IHRvcCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgIGlmICh0b2tlbi50eXBlID09IFwic3RhcnRUYWdcIikge1xuICAgICAgICBsZXQgZWxlbWVudCA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZWxlbWVudFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgYXR0aWJ1dGVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBlbGVtZW50LnRhZ05hbWUgPSB0b2tlbi50YWdOYW1lO1xuICAgICAgICBmb3IgKGxldCBwIGluIHRva2VuKSB7XG4gICAgICAgICAgICBpZiAocCAhPSB0b2tlbiAmJiBwICE9IFwidGFnTmFtZVwiKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hdHRpYnV0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbltwXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29tcHV0ZUNTUyhlbGVtZW50KTtcbiAgICAgICAgdG9wLmNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG4gICAgICAgIGVsZW1lbnQucGFyZW50ID0gdG9wO1xuICAgICAgICBpZiAoIXRva2VuLmlzU2VsZkNsb3NpbmcpIHtcbiAgICAgICAgICAgIHN0YWNrLnB1c2goZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VucnJlbnRUZXh0Tm9kZSA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09IFwiZW5kVGFnXCIpIHtcbiAgICAgICAgaWYgKHRva2VuLnRhZ05hbWUgIT0gdG9rZW4udGFnTmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGFnIHN0YXJ0IGVuZCBkb2Vzbid0IG1hdGNoXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodG9wLnRhZ05hbWUgPT09IFwic3R5bGVcIikge1xuICAgICAgICAgICAgICAgIGFkZENTU1J1bGVzKHRvcC5jaGlsZHJlblswXS5jb250ZW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGF5b3V0KHRvcClcbiAgICAgICAgICAgIHN0YWNrLnBvcCgpXG4gICAgICAgIH1cbiAgICAgICAgY3VucnJlbnRUZXh0Tm9kZSA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09IFwidGV4dFwiKSB7XG4gICAgICAgIGlmIChjdW5ycmVudFRleHROb2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIGN1bnJyZW50VGV4dE5vZGUgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9wLmNoaWxkcmVuLnB1c2goY3VucnJlbnRUZXh0Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VucnJlbnRUZXh0Tm9kZS5jb250ZW50ICs9IHRva2VuLmNvbnRlbnQ7XG4gICAgfVxufVxuY29uc3QgRU9GID0gU3ltYm9sKFwiRU9GXCIpO1xuXG5mdW5jdGlvbiBkYXRhKGMpIHtcbiAgICBpZiAoYyA9PSBcIjxcIikge1xuICAgICAgICByZXR1cm4gdGFnT3BlbjtcbiAgICB9IGVsc2UgaWYgKGMgPT0gRU9GKSB7XG4gICAgICAgIGVtaXQoe1xuICAgICAgICAgICAgdHlwZTogXCJFT0ZcIlxuICAgICAgICB9KVxuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZW1pdCh7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRhZ09wZW4oYykge1xuICAgIGlmIChjID09IFwiL1wiKSB7XG4gICAgICAgIHJldHVybiBlbmRUYWdPcGVuO1xuICAgIH0gZWxzZSBpZiAoYy5tYXRjaCgvXlthLXpBLVokXS8pKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW4gPSB7XG4gICAgICAgICAgICB0eXBlOiBcInN0YXJ0VGFnXCIsXG4gICAgICAgICAgICB0YWdOYW1lOiBcIlwiXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhZ05hbWUoYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZW5kVGFnT3BlbihjKSB7XG4gICAgaWYgKGMubWF0Y2goL15bYS16QS1aXcKlLykpIHtcbiAgICAgICAgY3VucnJlbnRUb2tlbiA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZW5kVGFnXCIsXG4gICAgICAgICAgICB0YWdOYW1lOiBcIlwiXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhZ05hbWUoYylcbiAgICB9IGVsc2UgaWYgKGMgPT0gXCI+XCIpIHtcblxuICAgIH0gZWxzZSBpZiAoYyA9PSBFT0YpIHtcblxuICAgIH0gZWxzZSB7XG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRhZ05hbWUoYykge1xuICAgIGlmIChjLm1hdGNoKC9eW1xcdFxcblxcZyBdJC8pKSB7XG4gICAgICAgIHJldHVybiBiZWZvcmVBdHRyaWJ1dGVOYW1lO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gc2VsZkNsb3NlaW5nU3RhcnRUYWc7XG4gICAgfSBlbHNlIGlmIChjLm1hdGNoKC9eW2EtekEtWl0kLykpIHtcbiAgICAgICAgY3VucnJlbnRUb2tlbi50YWdOYW1lICs9IGNcbiAgICAgICAgcmV0dXJuIHRhZ05hbWU7XG4gICAgfSBlbHNlIGlmIChjID09IFwiPlwiKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0YWdOYW1lO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYmVmb3JlQXR0cmlidXRlTmFtZShjKSB7XG4gICAgaWYgKGMubWF0Y2goL15bXFx0XFxuXFxmIF0kLykpIHtcbiAgICAgICAgcmV0dXJuIGJlZm9yZUF0dHJpYnV0ZU5hbWU7XG4gICAgfSBlbHNlIGlmIChjID09IFwiPlwiIHx8IGMgPT0gXCIvXCIgfHwgYyA9PSBFT0YpIHtcbiAgICAgICAgcmV0dXJuIGFmdGVyQXR0cmlidXRlTmFtZShjKVxuICAgIH0gZWxzZSBpZiAoYyA9PSBcIj1cIikge1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3VucnJlbnRBdHRyaWJ1dGUgPSB7XG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0cmlidXRlTmFtZShjKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFmdGVyQXR0cmlidXRlTmFtZShjKSB7XG4gICAgaWYgKGMubWF0Y2goL15bXFx0XFxuXFxmIF0kLykgfHwgYyA9PSBcIi9cIiB8fCBjID09IEVPRikge1xuICAgICAgICByZXR1cm4gYWZ0ZXJBdHRyaWJ1dGVOYW1lKGMpO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIj1cIikge1xuICAgICAgICByZXR1cm4gYmVmb3JlQXR0cmlidXRlVmFsdWU7XG4gICAgfSBlbHNlIGlmIChjID09IFwiXFx1MDAwMFwiKSB7XG5cbiAgICB9IGVsc2UgaWYgKGMgPT0gXCJcXFwiXCIgfHwgQyA9PSBcIidcIiB8fCBjID09IFwiPFwiKSB7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBjdW5ycmVudEF0dHJpYnV0ZS5uYW1lICs9IGM7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lXG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGJlZm9yZUF0dHJpYnV0ZVZhbHVlKGMpIHtcbiAgICBpZiAoYy5tYXRjaCgvXltcXHRcXG5cXGYgXSQvKSB8fCBjID09IFwiL1wiIHx8IGMgPT0gRU9GKSB7XG4gICAgICAgIHJldHVybiBiZWZvcmVBdHRyaWJ1dGVWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKGMgPT0gXCJcXFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIGRvdWJsZVF1b3RlZEF0dHJpYnV0ZVZhbHVlO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIlxcJ1wiKSB7XG4gICAgICAgIHJldHVybiBzaW5nbGVRdW90ZWRBdHRyaWJ1dGVWYWx1ZTtcblxuICAgIH0gZWxzZSBpZiAoYyA9PSBcIj5cIikge1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVucXVvdGVkQXR0cmlidXRlVmFsdWUoYyk7XG4gICAgfVxuXG59XG5cblxuZnVuY3Rpb24gZG91YmxlUXVvdGVkQXR0cmlidXRlVmFsdWUoYykge1xuICAgIGlmIChjID09IFwiXFxcIlwiKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW5bY3VucnJlbnRBdHRyaWJ1dGUubmFtZV0gPSBjdW5ycmVudEF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgcmV0dXJuIGFmdGVyUXVvdGVkQXR0cmlidXRlVmFsdWU7XG4gICAgfSBlbHNlIGlmIChjID09IFwiXFx1MDAwMFwiKSB7XG5cbiAgICB9IGVsc2UgaWYgKGMgPT0gRU9GKSB7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGN1bnJyZW50QXR0cmlidXRlLnZhbHVlICs9IGM7XG4gICAgICAgIHJldHVybiBkb3VibGVRdW90ZWRBdHRyaWJ1dGVWYWx1ZVxuICAgIH1cblxufVxuXG5mdW5jdGlvbiBzaW5nbGVRdW90ZWRBdHRyaWJ1dGVWYWx1ZShjKSB7XG4gICAgaWYgKGMgPT0gXCJcXCdcIikge1xuICAgICAgICBjdW5ycmVudFRva2VuW2N1bnJyZW50QXR0cmlidXRlLm5hbWVdID0gY3VucnJlbnRBdHRyaWJ1dGUudmFsdWU7XG4gICAgICAgIHJldHVybiBhZnRlclF1b3RlZEF0dHJpYnV0ZVZhbHVlO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIlxcdTAwMDBcIikge1xuXG4gICAgfSBlbHNlIGlmIChjID09IEVPRikge1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgICBjdW5ycmVudEF0dHJpYnV0ZS52YWx1ZSArPSBjO1xuICAgICAgICAvLyAgICByZXR1cm4gc2luZ2xlUXVvdGVkQXR0cmlidXRlVmFsdWUg5aWH5oCqXG4gICAgICAgIHJldHVybiBkb3VibGVRdW90ZWRBdHRyaWJ1dGVWYWx1ZVxuICAgIH1cblxuXG59XG5cbmZ1bmN0aW9uIFVucXVvdGVkQXR0cmlidXRlVmFsdWUoYykge1xuICAgIGlmIChjLm1hdGNoKC9eW1xcdFxcblxcZiBdJC8pKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW5bY3VucnJlbnRBdHRyaWJ1dGUubmFtZV0gPSBjdW5ycmVudEF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgcmV0dXJuIGJlZm9yZUF0dHJpYnV0ZU5hbWU7XG4gICAgfSBlbHNlIGlmIChjID09IFwiL1wiKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW5bY3VucnJlbnRBdHRyaWJ1dGUubmFtZV0gPSBjdW5ycmVudEF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHNlbGZDbG9zZWluZ1N0YXJ0VGFnO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIj5cIikge1xuICAgICAgICBjdW5ycmVudFRva2VuW2N1bnJyZW50QXR0cmlidXRlLm5hbWVdID0gY3VucnJlbnRBdHRyaWJ1dGUudmFsdWU7XG4gICAgICAgIGVtaXQoY3VucnJlbnRUb2tlbik7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIlxcdTAwMDBcIikge1xuXG4gICAgfSBlbHNlIGlmIChjID09IFwiXFxcIlwiIHx8IEMgPT0gXCInXCIgfHwgYyA9PSBcIjxcIiB8fCBjID09IFwiPVwiIHx8IGMgPT0gXCJgXCIpIHtcblxuICAgIH0gZWxzZSBpZiAoYyA9PSBFT0YpIHt9IGVsc2Uge1xuICAgICAgICBjdW5ycmVudEF0dHJpYnV0ZS5uYW1lICs9IGM7XG4gICAgICAgIHJldHVybiBVbnF1b3RlZEF0dHJpYnV0ZVZhbHVlXG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGFmdGVyUXVvdGVkQXR0cmlidXRlVmFsdWUoYykge1xuICAgIGlmIChjLm1hdGNoKC9eW1xcdFxcblxcZiBdJC8pKSB7XG4gICAgICAgIHJldHVybiBiZWZvcmVBdHRyaWJ1dGVOYW1lO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gc2VsZkNsb3NlaW5nU3RhcnRUYWc7XG4gICAgfSBlbHNlIGlmIChjID09IFwiPlwiKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW5bY3VucnJlbnRBdHRyaWJ1dGUubmFtZV0gPSBjdW5ycmVudEF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgZW1pdChjdW5ycmVudFRva2VuKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBlbHNlIGlmIChjID09IEVPRikge1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3VucnJlbnRBdHRyaWJ1dGUubmFtZSArPSBjO1xuICAgICAgICByZXR1cm4gZG91YmxlUXVvdGVkQXR0cmlidXRlVmFsdWVcbiAgICB9XG5cbn1cblxuXG5cblxuZnVuY3Rpb24gYXR0cmlidXRlTmFtZShjKSB7XG5cbn1cblxuZnVuY3Rpb24gc2VsZkNsb3NlaW5nU3RhcnRUYWcoYykge1xuICAgIGlmIChjID09IFwiPlwiKSB7XG4gICAgICAgIGN1bnJyZW50VG9rZW4uaXNTZWxmQ2xvc2luZyA9IHRydWU7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gZWxzZSBpZiAoYyA9PSBcIkVPRlwiKSB7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFzZXJIVE1MKGh0bWwpIHtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLVwiKVxuICAgIGNvbnNvbGUubG9nKGh0bWwpO1xuICAgIGxldCBzdGF0ZSA9IGRhdGE7XG4gICAgZm9yIChsZXQgYyBvZiBodG1sKSB7XG4gICAgICAgIHN0YXRlID0gc3RhdGUoYylcbiAgICB9XG4gICAgc3RhdGUgPSBzdGF0ZShFT0YpXG59Il19